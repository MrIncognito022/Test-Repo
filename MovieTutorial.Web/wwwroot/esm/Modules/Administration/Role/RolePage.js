import{a as h}from"../../../_chunks/chunk-NT2LZAZS.js";import{a as R}from"../../../_chunks/chunk-O7EIRAGN.js";import{e as x,f,g as P,h as o,i as c}from"../../../_chunks/chunk-Q4COIZBO.js";import{a as s,b as n,c as a,e as l}from"../../../_chunks/chunk-VVOU4364.js";var w=n(l(),1);var v=n(l(),1),e=n(l(),1);var m=class extends v.TemplatedDialog{constructor(t){super(t);this.permissions=new h(this.byId("Permissions"),{showRevoke:!1}),P.List({RoleID:this.options.roleID,Module:null,Submodule:null},y=>{this.permissions.value=y.Entities.map(p=>({PermissionKey:p}))}),this.permissions.implicitPermissions=(0,e.getRemoteData)("Administration.ImplicitPermissions")}getDialogOptions(){let t=super.getDialogOptions();return t.buttons=[{text:(0,e.localText)("Dialogs.OkButton"),click:y=>{P.Update({RoleID:this.options.roleID,Permissions:this.permissions.value.map(p=>p.PermissionKey),Module:null,Submodule:null},p=>{this.dialogClose(),window.setTimeout(()=>(0,e.notifySuccess)((0,e.localText)("Site.RolePermissionDialog.SaveSuccess")),0)})}},{text:(0,e.localText)("Dialogs.CancelButton"),click:()=>this.dialogClose()}],t.title=(0,e.format)((0,e.localText)("Site.RolePermissionDialog.DialogTitle"),this.options.title),t}getTemplate(){return'<div id="~_Permissions"></div>'}};s(m,"RolePermissionDialog");var u=n(l(),1);var T="edit-permissions",i=class extends u.EntityDialog{constructor(){super(...arguments);this.form=new f(this.idPrefix)}getFormKey(){return f.formKey}getIdProperty(){return o.idProperty}getLocalTextPrefix(){return o.localTextPrefix}getNameProperty(){return o.nameProperty}getService(){return c.baseUrl}getToolbarButtons(){let t=super.getToolbarButtons();return t.push({title:R.Site.RolePermissionDialog.EditButton,cssClass:T,icon:"fa-lock text-green",onClick:()=>{new m({roleID:this.entity.RoleId,title:this.entity.RoleName}).dialogOpen()}}),t}updateInterface(){super.updateInterface(),this.toolbar.findButton(T).toggleClass("disabled",this.isNewOrDeleted())}};s(i,"RoleDialog"),i=a([u.Decorators.registerClass("MovieTutorial.Administration.RoleDialog")],i);var d=n(l(),1);var r=class extends d.EntityGrid{getColumnsKey(){return x.columnsKey}getDialogType(){return i}getIdProperty(){return o.idProperty}getLocalTextPrefix(){return o.localTextPrefix}getService(){return c.baseUrl}constructor(g){super(g)}getDefaultSortBy(){return[o.Fields.RoleName]}};s(r,"RoleGrid"),r=a([d.Decorators.registerClass("MovieTutorial.Administration.RoleGrid")],r);$(function(){(0,w.initFullHeightGridPage)(new r($("#GridDiv")).element)});
//# sourceMappingURL=RolePage.js.map
